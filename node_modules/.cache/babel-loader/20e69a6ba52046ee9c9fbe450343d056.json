{"ast":null,"code":"var _jsxFileName = \"D:\\\\Hilo\\\\hilocare\\\\src\\\\app\\\\components\\\\company\\\\CompanyList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext, useRef, Fragment } from 'react';\nimport AuthContext from '../context/auth_context';\nimport style from './CompanyList.module.css';\nimport classes from '../../App.module.css';\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\nimport { BsPencilSquare } from 'react-icons/bs';\nimport { MdDelete } from 'react-icons/md';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CompanyList = props => {\n  _s();\n\n  const [companyList, setCompanyList] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [httpError, setHttperror] = useState();\n  const MySwal = withReactContent(Swal);\n  const authen = useContext(AuthContext);\n  const getToken = authen.token;\n  const [showEditScreen, setShowEditScreen] = useState(false);\n\n  const showEditScreenHandler = () => {\n    setShowEditScreen(true);\n  };\n\n  useEffect(() => {\n    const fetchList = async () => {\n      const res = await fetch('https://uathilocare.hilo.com.vn/api/Company/getInfo', {\n        method: 'GET',\n        headers: {\n          'Language': 'vn',\n          'Authorization': 'Bearer ' + getToken\n        }\n      });\n\n      if (!res.ok) {\n        throw new Error('Đã có lỗi xảy ra');\n      }\n\n      const responseData = await res.json();\n      const list = responseData.data;\n      setCompanyList(list); // const userNameList = list.map(item => {\n      //     return {\n      //         id: item.userName\n      //     }\n      // });\n      // console.log(userNameList);\n\n      setIsLoading(false);\n    };\n\n    fetchList().catch(err => {\n      setIsLoading(false);\n      setHttperror(err.message);\n    });\n  }, []);\n\n  const deleteTask = async id => {\n    console.log(id);\n    MySwal.fire({\n      title: 'Bạn có chắn chắn muốn xóa công ty này?',\n      showDenyButton: false,\n      showCancelButton: true,\n      confirmButtonText: `Xóa`\n    }).then(async result => {\n      if (result.isConfirmed) {\n        const res = await fetch('https://uathilocare.hilo.com.vn/api/Company/delete', {\n          method: 'DELETE',\n          body: JSON.stringify({\n            id: id\n          }),\n          headers: {\n            'Content-Type': 'application/json',\n            'Language': 'vn',\n            'Authorization': 'Bearer ' + getToken\n          }\n        });\n        const deleteResponseData = await res.json();\n        deleteResponseData.code === 200 ? MySwal.fire('Công ty đã được xóa!', '', 'success') : MySwal.fire('Đã có lỗi xảy ra khi xóa công ty', '', 'info');\n        setCompanyList(companyList.filter(item => item.userId !== id));\n      }\n    });\n  };\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: style.loading,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Is loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this);\n  }\n\n  if (httpError) {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: style.loading,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: httpError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: `${classes.App} ${props.sidebar === 'open' && classes.active}`,\n    sidebar: props.sidebar,\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Danh s\\xE1ch C\\xF4ng ty\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: style.table,\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"T\\xEAn c\\xF4ng ty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"M\\xE3 s\\u1ED1 thu\\u1EBF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i li\\xEAn h\\u1EC7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Email li\\xEAn h\\u1EC7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Fax\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0110\\u1ECBa ch\\u1EC9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"S\\u1EEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"X\\xF3a\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Ghi ch\\xFA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: companyList.map((com, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: index + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: com.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: com.taxCode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: com.phone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: com.contactPhone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: com.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: com.contactEmail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: com.fax\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: com.address\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: com.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(BsPencilSquare, {\n                className: style.click,\n                onClick: showEditScreenHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(MdDelete, {\n                className: style.click,\n                onClick: () => deleteTask(com.userId)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 33\n            }, this)]\n          }, com.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CompanyList, \"hO/1p6tLnrlZELnDYozfVpm14do=\");\n\n_c = CompanyList;\nexport default CompanyList;\n\nvar _c;\n\n$RefreshReg$(_c, \"CompanyList\");","map":{"version":3,"sources":["D:/Hilo/hilocare/src/app/components/company/CompanyList.js"],"names":["React","useState","useEffect","useContext","useRef","Fragment","AuthContext","style","classes","Swal","withReactContent","BsPencilSquare","MdDelete","CompanyList","props","companyList","setCompanyList","isLoading","setIsLoading","httpError","setHttperror","MySwal","authen","getToken","token","showEditScreen","setShowEditScreen","showEditScreenHandler","fetchList","res","fetch","method","headers","ok","Error","responseData","json","list","data","catch","err","message","deleteTask","id","console","log","fire","title","showDenyButton","showCancelButton","confirmButtonText","then","result","isConfirmed","body","JSON","stringify","deleteResponseData","code","filter","item","userId","loading","App","sidebar","active","table","map","com","index","name","taxCode","phone","contactPhone","email","contactEmail","fax","address","description","click"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext, useRef, Fragment } from 'react';\r\nimport AuthContext from '../context/auth_context';\r\nimport style from './CompanyList.module.css';\r\nimport classes from '../../App.module.css';\r\nimport Swal from 'sweetalert2';\r\nimport withReactContent from 'sweetalert2-react-content';\r\nimport { BsPencilSquare } from 'react-icons/bs';\r\nimport { MdDelete } from 'react-icons/md';\r\n\r\n\r\nconst CompanyList = (props) => {\r\n\r\n    const [companyList, setCompanyList] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [httpError, setHttperror] = useState();\r\n\r\n    const MySwal = withReactContent(Swal)\r\n\r\n    const authen = useContext(AuthContext);\r\n    const getToken = authen.token;\r\n\r\n    const [showEditScreen, setShowEditScreen] = useState(false);\r\n\r\n    const showEditScreenHandler = () => {\r\n        setShowEditScreen(true);\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchList = async () => {\r\n            const res = await fetch('https://uathilocare.hilo.com.vn/api/Company/getInfo',\r\n            {\r\n              method: 'GET',\r\n              headers :{\r\n                'Language' : 'vn',\r\n                'Authorization': 'Bearer '+ getToken\r\n              }\r\n            });\r\n            if (!res.ok) {\r\n                throw new Error('Đã có lỗi xảy ra')\r\n            }\r\n\r\n            const responseData = await res.json();\r\n            const list = responseData.data;\r\n            \r\n            setCompanyList(list);\r\n            // const userNameList = list.map(item => {\r\n            //     return {\r\n            //         id: item.userName\r\n            //     }\r\n            // });\r\n            // console.log(userNameList);\r\n            setIsLoading(false);\r\n        }\r\n            fetchList().catch(err => {\r\n                setIsLoading(false);\r\n                setHttperror(err.message);\r\n            })\r\n            \r\n    }, []);\r\n\r\n\r\n    const deleteTask = async (id) => {\r\n        console.log(id);\r\n        MySwal.fire({\r\n            title: 'Bạn có chắn chắn muốn xóa công ty này?',\r\n            showDenyButton: false,\r\n            showCancelButton: true,\r\n            confirmButtonText: `Xóa`,\r\n          }).then( async (result) => {\r\n            if (result.isConfirmed) {\r\n                const res = await fetch('https://uathilocare.hilo.com.vn/api/Company/delete',\r\n                    {\r\n                    method: 'DELETE',\r\n                    body: JSON.stringify({\r\n                        id: id\r\n                    }),\r\n                    headers :{\r\n                        'Content-Type': 'application/json',\r\n                        'Language' : 'vn',\r\n                        'Authorization': 'Bearer '+ getToken\r\n                    }\r\n                    })\r\n                    const deleteResponseData = await res.json();\r\n                    deleteResponseData.code === 200 ? MySwal.fire('Công ty đã được xóa!', '', 'success') : MySwal.fire('Đã có lỗi xảy ra khi xóa công ty', '', 'info');\r\n                setCompanyList(companyList.filter((item) => item.userId !== id))\r\n            } \r\n          })\r\n      }\r\n\r\n    if(isLoading){\r\n        return(\r\n            <section className={style.loading}>\r\n                <p>Is loading...</p>\r\n            </section>\r\n        )\r\n    }\r\n\r\n    if(httpError){\r\n        return(\r\n            <section className={style.loading}>\r\n                <p>{httpError}</p>\r\n            </section>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <main className={`${classes.App} ${props.sidebar ==='open'&& classes.active}`} sidebar={props.sidebar}>\r\n            <section>\r\n                <h1>Danh sách Công ty</h1>\r\n                    <table className={style.table}>\r\n                    <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>Tên công ty</th>\r\n                        <th>Mã số thuế</th>\r\n                        <th>Số điện thoại</th>\r\n                        <th>Số điện thoại liên hệ</th>\r\n                        <th>Email</th>\r\n                        <th>Email liên hệ</th>\r\n                        <th>Fax</th>\r\n                        <th>Địa chỉ</th>\r\n                        <th>Sửa</th>\r\n                        <th>Xóa</th>\r\n                        <th>Ghi chú</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {companyList.map((com, index) => (\r\n                            <tr key={com.id}>\r\n                                <th>{index + 1}</th>\r\n                                <td>{com.name}</td>\r\n                                <td>{com.taxCode}</td>\r\n                                <td>{com.phone}</td>\r\n                                <td>{com.contactPhone}</td>\r\n                                <td>{com.email}</td>    \r\n                                <td>{com.contactEmail}</td>\r\n                                <td>{com.fax}</td>\r\n                                <td>{com.address}</td>\r\n                                <td>{com.description}</td>\r\n                                <td><BsPencilSquare className={style.click} onClick={showEditScreenHandler}/></td>\r\n                                <td><MdDelete className={style.click} onClick={() => deleteTask(com.userId)}/></td>\r\n                            </tr>\r\n                    ))}\r\n                    </tbody>\r\n                    </table>\r\n            </section>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default CompanyList;"]},"metadata":{},"sourceType":"module"}